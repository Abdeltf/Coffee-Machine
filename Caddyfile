{
    # Global options for automatic SSL
    email contact@vendymaroc.com
}

vendymaroc.com, www.vendymaroc.com {
    # 1. Reverse proxy to your Next.js container
    reverse_proxy app:3000

    # 2. Modern Compression
    # Caddy supports zstd, which is even faster than gzip
    encode zstd gzip

    # 3. Security Headers for SEO & Safety
    header {
        # Prevents "Too Many Redirects" issues with Cloudflare
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
        X-Content-Type-Options "nosniff"
        X-Frame-Options "DENY"
        Referrer-Policy "no-referrer-when-downgrade"
    }
}